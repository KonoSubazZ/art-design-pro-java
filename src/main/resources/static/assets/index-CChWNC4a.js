var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,i=(e,t,a)=>new Promise(((s,l)=>{var o=e=>{try{i(a.next(e))}catch(t){l(t)}},r=e=>{try{i(a.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,r);i((a=a.apply(e,t)).next())}));import{_ as n,a as u,u as d,b as c,c as p,A as g,d as h,e as v,S as f,f as m,l as y,g as x,R as w,U as b,h as _,H as k}from"./index-BJ9bV_jd.js";/* empty css                    */import{k as T,a2 as M,aE as B,r as P,e as I,aF as L,c as $,m as O,t as V,z as j,F as S,u as D,p as C,v as E,T as R,G as X,s as F,x as H,y as U,av as A,aG as z,M as K,a3 as G,l as q,C as Y,D as J,at as N,I as Q,J as W,au as Z,O as ee,a4 as te,L as ae,aH as se,a5 as le,i as oe,aa as re,aI as ie,S as ne,P as ue,E as de,j as ce}from"./vendor-CAvuXLR8.js";import{_ as pe}from"./LoginLeftView-DfkX8TKY.js";import"./lf_icon2-Byh5fA9S.js";const ge=["innerHTML"],he=n(T({__name:"ArtDragVerify",props:{value:{type:Boolean,default:!1},width:{default:260},height:{default:38},text:{default:"按住滑块拖动"},successText:{default:"success"},background:{default:"#eee"},progressBarBg:{default:"#1385FF"},completedBg:{default:"#57D187"},circle:{type:Boolean,default:!1},radius:{default:"calc(var(--custom-radius) / 3 + 2px)"},handlerIcon:{default:"&#xea50;"},successIcon:{default:"&#xe621;"},handlerBg:{default:"#fff"},textSize:{default:"13px"},textColor:{default:"#333"}},emits:["handlerMove","update:value","passCallback"],setup(e,{expose:t,emit:a}){const s=a,l=e,o=M({isMoving:!1,x:0,isOk:!1}),{isOk:r}=B(o),i=P(),n=P(),u=P(),d=P();let c,p,g,h;const v=e=>{c=e.targetTouches[0].pageX,p=e.targetTouches[0].pageY},f=e=>{g=e.targetTouches[0].pageX,h=e.targetTouches[0].pageY,Math.abs(g-c)>Math.abs(h-p)&&e.preventDefault()};document.addEventListener("touchstart",v),document.addEventListener("touchmove",f,{passive:!1}),I((()=>{var e,t,a;null==(e=i.value)||e.style.setProperty("--textColor",l.textColor),null==(t=i.value)||t.style.setProperty("--width",Math.floor(l.width/2)+"px"),null==(a=i.value)||a.style.setProperty("--pwidth",-Math.floor(l.width/2)+"px"),document.addEventListener("touchstart",v),document.addEventListener("touchmove",f,{passive:!1})})),L((()=>{document.removeEventListener("touchstart",v),document.removeEventListener("touchmove",f)}));const m={left:"0",width:l.height+"px",height:l.height+"px",background:l.handlerBg},y={width:l.width+"px",height:l.height+"px",lineHeight:l.height+"px",background:l.background,borderRadius:l.circle?l.height/2+"px":l.radius},x={background:l.progressBarBg,height:l.height+"px",borderRadius:l.circle?l.height/2+"px 0 0 "+l.height/2+"px":l.radius},w={height:l.height+"px",width:l.width+"px",fontSize:l.textSize},b=$((()=>l.value?l.successText:l.text)),_=e=>{l.value||(o.isMoving=!0,u.value.style.transition="none",o.x=(e.pageX||e.touches[0].pageX)-parseInt(u.value.style.left.replace("px",""),10)),s("handlerMove")},k=e=>{if(o.isMoving&&!l.value){let t=(e.pageX||e.touches[0].pageX)-o.x;t>0&&t<=l.width-l.height?(u.value.style.left=t+"px",d.value.style.width=t+l.height/2+"px"):t>l.width-l.height&&(u.value.style.left=l.width-l.height+"px",d.value.style.width=l.width-l.height/2+"px",F())}},T=e=>{if(o.isMoving&&!l.value){(e.pageX||e.changedTouches[0].pageX)-o.x<l.width-l.height?(o.isOk=!0,u.value.style.left="0",u.value.style.transition="all 0.2s",d.value.style.width="0",o.isOk=!1):(u.value.style.transition="none",u.value.style.left=l.width-l.height+"px",d.value.style.width=l.width-l.height/2+"px",F()),o.isMoving=!1}},F=()=>{s("update:value",!0),o.isMoving=!1,d.value.style.background=l.completedBg,n.value.style["-webkit-text-fill-color"]="unset",n.value.style.animation="slidetounlock2 3s infinite",n.value.style.color="#fff",s("passCallback")};return t({reset:()=>{u.value.style.left="0",d.value.style.width="0",u.value.children[0].innerHTML=l.handlerIcon,n.value.style["-webkit-text-fill-color"]="transparent",n.value.style.animation="slidetounlock 3s infinite",n.value.style.color=l.background,s("update:value",!1),o.isOk=!1,o.isMoving=!1,o.x=0}}),(e,t)=>(V(),O("div",{ref_key:"dragVerify",ref:i,class:"drag_verify",style:y,onMousemove:k,onMouseup:T,onMouseleave:T,onTouchmove:k,onTouchend:T},[j("div",{class:S(["dv_progress_bar",{goFirst2:D(r)}]),ref_key:"progressBar",ref:d,style:x},null,2),j("div",{class:"dv_text",style:w,ref_key:"messageRef",ref:n},[e.$slots.textBefore?C(e.$slots,"textBefore",{key:0},void 0,!0):E("",!0),R(" "+X(D(b))+" ",1),e.$slots.textAfter?C(e.$slots,"textAfter",{key:1},void 0,!0):E("",!0)],512),j("div",{class:S(["dv_handler dv_handler_bg",{goFirst:D(r)}]),onMousedown:_,onTouchstart:_,ref_key:"handler",ref:u,style:m},[j("i",{class:"iconfont-sys",innerHTML:e.value?e.successIcon:e.handlerIcon},null,8,ge)],34)],544))}}),[["__scopeId","data-v-61236fff"]]);class ve{static getDataByKey(e){return u.get({url:"/sys/public/data-config",params:e})}}const fe={class:"login"},me={class:"right-wrap"},ye={class:"top-right-wrap"},xe={class:"iconfont-sys"},we={class:"menu-txt"},be={key:0,class:"iconfont-sys icon-check"},_e={class:"header"},ke={class:"login-wrap"},Te={class:"form"},Me={class:"title"},Be={class:"sub-title"},Pe={class:"drag-verify"},Ie={class:"forget-password"},Le={style:{"margin-top":"30px"}},$e={class:"footer"},Oe=T((Ve=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&r(e,a,t[a]);if(s)for(var a of s(t))o.call(t,a)&&r(e,a,t[a]);return e})({},{name:"Login"}),t(Ve,a({__name:"index",setup(e){const{t:t}=d(),a=c(),{isDark:s,systemThemeType:l}=F(a),o=P(),r=p(),n=q(),u=P(!1),T=P(!1),B=P(!1),L=g.systemInfo.name,C=P(),ge=M({username:"",password:"",rememberPassword:!0}),Oe=$((()=>({username:[{required:!0,message:t("login.placeholder[0]"),trigger:"blur"}],password:[{required:!0,message:t("login.placeholder[1]"),trigger:"blur"}]}))),Ve=P(!1),{width:je}=h();I((()=>i(this,null,(function*(){const{data:e,success:t}=yield ve.getDataByKey({dataKey:"iboot-studio.slide-validator.enabled"});t&&(B.value="true"===e)}))));const Se=()=>i(this,null,(function*(){C.value&&(yield C.value.validate((e=>i(this,null,(function*(){if(e){if(B.value&&!u.value)return void(T.value=!0);Ve.value=!0;const e={userName:ge.username,password:ge.password,rememberPassword:ge.rememberPassword};try{const t=yield b.login(e);if(t.code===_.success){const{saTokenInfo:e}=t.data;if(null==e?void 0:e.tokenValue){r.setSaTokenInfo(e);const t=yield b.getUserInfo();r.setLoginStatus(!0),Ce(),t.code===_.success?(r.setUserInfo(t.data),r.setLoginStatus(!0),n.push(k)):de.error(t.msg)}}else de.error(t.msg),Ve.value=!1,De()}finally{Ve.value=!1,De()}}})))))})),De=()=>{o.value.reset()},Ce=()=>{setTimeout((()=>{ce({title:t("login.success.title"),type:"success",duration:2500,zIndex:1e4,message:`${t("login.success.message")}, ${L}!`})}),150)},{locale:Ee}=d(),Re=e=>{Ee.value!==e&&(Ee.value=e,r.setLanguage(e))},Xe=()=>{let{LIGHT:e,DARK:t}=f;m().switchThemeStyles(l.value===e?t:e)};return(e,t)=>{const a=pe,l=Z,r=N,i=A,n=v,d=z,c=ae,p=te,g=he,h=ie,f=Y("RouterLink"),m=ue,b=G,_=J("ripple");return V(),O("div",fe,[H(a),j("div",me,[j("div",ye,[j("div",{class:"btn theme-btn",onClick:Xe},[j("i",xe,X(D(s)?"":""),1)]),H(i,{onCommand:Re,"popper-class":"langDropDownStyle"},{dropdown:U((()=>[H(r,null,{default:U((()=>[(V(!0),O(Q,null,W(D(y),(e=>(V(),O("div",{key:e.value,class:"lang-btn-item"},[H(l,{command:e.value,class:S({"is-selected":D(Ee)===e.value})},{default:U((()=>[j("span",we,X(e.label),1),D(Ee)===e.value?(V(),O("i",be,"")):E("",!0)])),_:2},1032,["command","class"])])))),128))])),_:1})])),default:U((()=>[t[4]||(t[4]=j("div",{class:"btn language-btn"},[j("i",{class:"iconfont-sys icon-language"},"")],-1))])),_:1,__:[4]})]),j("div",_e,[H(n,{class:"icon"}),j("h1",null,X(D(L)),1)]),j("div",ke,[j("div",Te,[j("h3",Me,X(e.$t("login.title")),1),j("p",Be,[t[6]||(t[6]=R("关注微信公号 ")),H(d,{target:"_blank",type:"primary",underline:"always",href:"./iboot/iboot_wx_pub.jpg"},{default:U((()=>t[5]||(t[5]=[R("iboot ")]))),_:1,__:[5]}),t[7]||(t[7]=R(" 回复 “iboot” 获取账户密码登录体验。 "))]),H(b,{ref_key:"formRef",ref:C,model:D(ge),rules:D(Oe),onKeyup:K(Se,["enter"]),style:{"margin-top":"25px"}},{default:U((()=>[H(p,{prop:"username"},{default:U((()=>[H(c,{placeholder:e.$t("login.placeholder[0]"),modelValue:D(ge).username,"onUpdate:modelValue":t[0]||(t[0]=e=>D(ge).username=e),modelModifiers:{trim:!0},"prefix-icon":D(se)},null,8,["placeholder","modelValue","prefix-icon"])])),_:1}),H(p,{prop:"password"},{default:U((()=>[H(c,{placeholder:e.$t("login.placeholder[1]"),modelValue:D(ge).password,"onUpdate:modelValue":t[1]||(t[1]=e=>D(ge).password=e),modelModifiers:{trim:!0},"prefix-icon":D(le),type:"password",radius:"8px","show-password":"",autocomplete:"off"},null,8,["placeholder","modelValue","prefix-icon"])])),_:1}),ee(j("div",Pe,[j("div",{class:S(["drag-verify-content",{error:!D(u)&&D(T)}])},[H(g,{ref_key:"dragVerify",ref:o,value:D(u),"onUpdate:value":t[2]||(t[2]=e=>oe(u)?u.value=e:null),width:D(je)<500?328:438,text:e.$t("login.sliderText"),textColor:"var(--art-gray-800)",successText:e.$t("login.sliderSuccessText"),progressBarBg:D(x)("--el-color-primary"),background:"var(--art-gray-200)",handlerBg:"var(--art-main-bg-color)"},null,8,["value","width","text","successText","progressBarBg"])],2),j("p",{class:S(["error-text",{"show-error-text":!D(u)&&D(T)}])},X(e.$t("login.placeholder[2]")),3)],512),[[re,D(B)]]),j("div",Ie,[H(h,{modelValue:D(ge).rememberPassword,"onUpdate:modelValue":t[3]||(t[3]=e=>D(ge).rememberPassword=e)},{default:U((()=>[R(X(e.$t("login.rememberPwd")),1)])),_:1},8,["modelValue"]),H(f,{to:D(w).ForgetPassword},{default:U((()=>[R(X(e.$t("login.forgetPwd")),1)])),_:1},8,["to"])]),j("div",Le,[ee((V(),ne(m,{class:"login-btn",type:"primary",onClick:Se,loading:D(Ve)},{default:U((()=>[R(X(e.$t("login.btnText")),1)])),_:1},8,["loading"])),[[_]])]),j("div",$e,[j("p",null,[R(X(e.$t("login.noAccount"))+" ",1),H(f,{to:D(w).Register},{default:U((()=>[R(X(e.$t("login.register")),1)])),_:1},8,["to"])])])])),_:1},8,["model","rules"])])])])])}}}))));var Ve;const je=n(Oe,[["__scopeId","data-v-044a7a01"]]);export{je as default};
