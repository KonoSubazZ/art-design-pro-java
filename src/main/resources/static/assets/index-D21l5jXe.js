var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,i=(e,t,a)=>new Promise(((s,l)=>{var o=e=>{try{i(a.next(e))}catch(t){l(t)}},r=e=>{try{i(a.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,r);i((a=a.apply(e,t)).next())}));import{_ as n,u,a as d,b as c,A as p,c as g,d as h,S as v,e as f,l as m,g as y,R as x,C as w,U as b,f as _,H as k}from"./index-BywNBzKr.js";/* empty css                    */import{k as T,a2 as M,aG as B,r as P,e as I,aH as L,c as O,m as $,t as S,z as j,F as C,u as V,p as D,v as H,T as E,G as A,aw as R,_ as X,aI as U,aJ as F,aK as z,E as K,s as G,x as Y,y as q,av as J,aL as N,M as Q,a3 as W,l as Z,C as ee,D as te,at as ae,I as se,J as le,au as oe,O as re,a4 as ie,L as ne,aM as ue,a5 as de,i as ce,aa as pe,aN as ge,S as he,P as ve,j as fe}from"./vendor-C0Cq8Zey.js";import{_ as me}from"./LoginLeftView-D3ZjvpvL.js";import{S as ye}from"./sysApi-fRs6P3xq.js";import"./lf_icon2-Byh5fA9S.js";const xe=["innerHTML"],we=n(T({__name:"ArtDragVerify",props:{value:{type:Boolean,default:!1},width:{default:260},height:{default:38},text:{default:"按住滑块拖动"},successText:{default:"success"},background:{default:"#eee"},progressBarBg:{default:"#1385FF"},completedBg:{default:"#57D187"},circle:{type:Boolean,default:!1},radius:{default:"calc(var(--custom-radius) / 3 + 2px)"},handlerIcon:{default:"&#xea50;"},successIcon:{default:"&#xe621;"},handlerBg:{default:"#fff"},textSize:{default:"13px"},textColor:{default:"#333"}},emits:["handlerMove","update:value","passCallback"],setup(e,{expose:t,emit:a}){const s=a,l=e,o=M({isMoving:!1,x:0,isOk:!1}),{isOk:r}=B(o),i=P(),n=P(),u=P(),d=P();let c,p,g,h;const v=e=>{c=e.targetTouches[0].pageX,p=e.targetTouches[0].pageY},f=e=>{g=e.targetTouches[0].pageX,h=e.targetTouches[0].pageY,Math.abs(g-c)>Math.abs(h-p)&&e.preventDefault()};document.addEventListener("touchstart",v),document.addEventListener("touchmove",f,{passive:!1}),I((()=>{var e,t,a;null==(e=i.value)||e.style.setProperty("--textColor",l.textColor),null==(t=i.value)||t.style.setProperty("--width",Math.floor(l.width/2)+"px"),null==(a=i.value)||a.style.setProperty("--pwidth",-Math.floor(l.width/2)+"px"),document.addEventListener("touchstart",v),document.addEventListener("touchmove",f,{passive:!1})})),L((()=>{document.removeEventListener("touchstart",v),document.removeEventListener("touchmove",f)}));const m={left:"0",width:l.height+"px",height:l.height+"px",background:l.handlerBg},y={width:l.width+"px",height:l.height+"px",lineHeight:l.height+"px",background:l.background,borderRadius:l.circle?l.height/2+"px":l.radius},x={background:l.progressBarBg,height:l.height+"px",borderRadius:l.circle?l.height/2+"px 0 0 "+l.height/2+"px":l.radius},w={height:l.height+"px",width:l.width+"px",fontSize:l.textSize},b=O((()=>l.value?l.successText:l.text)),_=e=>{l.value||(o.isMoving=!0,u.value.style.transition="none",o.x=(e.pageX||e.touches[0].pageX)-parseInt(u.value.style.left.replace("px",""),10)),s("handlerMove")},k=e=>{if(o.isMoving&&!l.value){let t=(e.pageX||e.touches[0].pageX)-o.x;t>0&&t<=l.width-l.height?(u.value.style.left=t+"px",d.value.style.width=t+l.height/2+"px"):t>l.width-l.height&&(u.value.style.left=l.width-l.height+"px",d.value.style.width=l.width-l.height/2+"px",R())}},T=e=>{if(o.isMoving&&!l.value){(e.pageX||e.changedTouches[0].pageX)-o.x<l.width-l.height?(o.isOk=!0,u.value.style.left="0",u.value.style.transition="all 0.2s",d.value.style.width="0",o.isOk=!1):(u.value.style.transition="none",u.value.style.left=l.width-l.height+"px",d.value.style.width=l.width-l.height/2+"px",R()),o.isMoving=!1}},R=()=>{s("update:value",!0),o.isMoving=!1,d.value.style.background=l.completedBg,n.value.style["-webkit-text-fill-color"]="unset",n.value.style.animation="slidetounlock2 3s infinite",n.value.style.color="#fff",s("passCallback")};return t({reset:()=>{u.value.style.left="0",d.value.style.width="0",u.value.children[0].innerHTML=l.handlerIcon,n.value.style["-webkit-text-fill-color"]="transparent",n.value.style.animation="slidetounlock 3s infinite",n.value.style.color=l.background,s("update:value",!1),o.isOk=!1,o.isMoving=!1,o.x=0}}),(e,t)=>(S(),$("div",{ref_key:"dragVerify",ref:i,class:"drag_verify",style:y,onMousemove:k,onMouseup:T,onMouseleave:T,onTouchmove:k,onTouchend:T},[j("div",{class:C(["dv_progress_bar",{goFirst2:V(r)}]),ref_key:"progressBar",ref:d,style:x},null,2),j("div",{class:"dv_text",style:w,ref_key:"messageRef",ref:n},[e.$slots.textBefore?D(e.$slots,"textBefore",{key:0},void 0,!0):H("",!0),E(" "+A(V(b))+" ",1),e.$slots.textAfter?D(e.$slots,"textAfter",{key:1},void 0,!0):H("",!0)],512),j("div",{class:C(["dv_handler dv_handler_bg",{goFirst:V(r)}]),onMousedown:_,onTouchstart:_,ref_key:"handler",ref:u,style:m},[j("i",{class:"iconfont-sys",innerHTML:e.value?e.successIcon:e.handlerIcon},null,8,xe)],34)],544))}}),[["__scopeId","data-v-61236fff"]]);class be{static tip(e,t=!0){return i(this,null,(function*(){const{msg:a,detailMsg:s}=e,l=e=>i(this,null,(function*(){try{yield navigator.clipboard.writeText(e),K.success("已复制详情到剪切板")}catch(t){K.error("复制失败")}}));R({title:"操作提示",message:X("div",null,[X(U,{type:"danger"},a),s&&t&&X(F,{expandIconPosition:"left"},[X(z,{title:"详情",style:{maxHeight:"600px",overflowY:"auto"}},(()=>X(U,{type:"danger"},s)))])].filter(Boolean)),confirmButtonText:"确认",cancelButtonText:"复制",showCancelButton:t&&Boolean(s),showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1,draggable:!0}).then((()=>{})).catch((e=>{"cancel"===e&&s&&l(s)}))}))}}const _e={class:"login"},ke={class:"right-wrap"},Te={class:"top-right-wrap"},Me={class:"iconfont-sys"},Be={class:"menu-txt"},Pe={key:0,class:"iconfont-sys icon-check"},Ie={class:"header"},Le={class:"login-wrap"},Oe={class:"form"},$e={class:"title"},Se={class:"sub-title"},je={class:"drag-verify"},Ce={class:"forget-password"},Ve={style:{"margin-top":"30px"}},De={class:"footer"},He=T((Ee=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&r(e,a,t[a]);if(s)for(var a of s(t))o.call(t,a)&&r(e,a,t[a]);return e})({},{name:"Login"}),t(Ee,a({__name:"index",setup(e){const{t:t}=u(),a=d(),{isDark:s,systemThemeType:l}=G(a),o=P(),r=c(),n=Z(),T=P(!1),B=P(!1),L=P(!1),D=p.systemInfo.name,R=P(),X=M({username:"",password:"",rememberPassword:!0}),U=O((()=>({username:[{required:!0,message:t("login.placeholder[0]"),trigger:"blur"}],password:[{required:!0,message:t("login.placeholder[1]"),trigger:"blur"}]}))),F=P(!1),{width:z}=g(),xe=()=>i(this,null,(function*(){let{data:e,success:t}=yield ye.getDataByKey({dataKey:"iboot-studio.slide-validator.enabled"});t&&(L.value="true"===e)}));I((()=>i(this,null,(function*(){yield xe()}))));const He=()=>i(this,null,(function*(){R.value&&(yield R.value.validate((e=>i(this,null,(function*(){if(e){if(L.value&&!T.value)return void(B.value=!0);F.value=!0;const e={userName:X.username,password:w.SHA256(X.password).toString(w.enc.Hex),rememberPassword:X.rememberPassword};try{const t=yield b.login(e);if(t.code===_.success){const{saTokenInfo:e}=t.data;if(null==e?void 0:e.tokenValue){r.setSaTokenInfo(e);const t=yield b.getUserInfo();r.setLoginStatus(!0),t.code===_.success?(r.setUserInfo(t.data),r.setLoginStatus(!0),yield n.push(k),Ae()):K.error(t.msg)}}else yield be.tip(t,!0),F.value=!1,Ee()}finally{F.value=!1,Ee()}}})))))})),Ee=()=>{var e;null==(e=o.value)||e.reset()},Ae=()=>{setTimeout((()=>{fe({title:t("login.success.title"),type:"success",duration:2500,zIndex:1e4,message:`${t("login.success.message")}, ${D}!`})}),150)},{locale:Re}=u(),Xe=e=>{Re.value!==e&&(Re.value=e,r.setLanguage(e))},Ue=()=>{let{LIGHT:e,DARK:t}=v;f().switchThemeStyles(l.value===e?t:e)};return(e,t)=>{const a=me,l=oe,r=ae,i=J,n=h,u=N,d=ne,c=ie,p=we,g=ge,v=ee("RouterLink"),f=ve,w=W,b=te("ripple");return S(),$("div",_e,[Y(a),j("div",ke,[j("div",Te,[j("div",{class:"btn theme-btn",onClick:Ue},[j("i",Me,A(V(s)?"":""),1)]),Y(i,{onCommand:Xe,"popper-class":"langDropDownStyle"},{dropdown:q((()=>[Y(r,null,{default:q((()=>[(S(!0),$(se,null,le(V(m),(e=>(S(),$("div",{key:e.value,class:"lang-btn-item"},[Y(l,{command:e.value,class:C({"is-selected":V(Re)===e.value})},{default:q((()=>[j("span",Be,A(e.label),1),V(Re)===e.value?(S(),$("i",Pe,"")):H("",!0)])),_:2},1032,["command","class"])])))),128))])),_:1})])),default:q((()=>[t[4]||(t[4]=j("div",{class:"btn language-btn"},[j("i",{class:"iconfont-sys icon-language"},"")],-1))])),_:1,__:[4]})]),j("div",Ie,[Y(n,{class:"icon"}),j("h1",null,A(V(D)),1)]),j("div",Le,[j("div",Oe,[j("h3",$e,A(e.$t("login.title")),1),j("p",Se,[t[6]||(t[6]=E("关注微信公号 ")),Y(u,{target:"_blank",type:"primary",underline:"always",href:"./iboot/iboot_wx_pub.jpg"},{default:q((()=>t[5]||(t[5]=[E("iboot ")]))),_:1,__:[5]}),t[7]||(t[7]=E(' 回复 "iboot" 获取账户密码登录体验。 '))]),Y(w,{ref_key:"formRef",ref:R,model:V(X),rules:V(U),onKeyup:Q(He,["enter"]),style:{"margin-top":"25px"}},{default:q((()=>[Y(c,{prop:"username"},{default:q((()=>[Y(d,{placeholder:e.$t("login.placeholder[0]"),modelValue:V(X).username,"onUpdate:modelValue":t[0]||(t[0]=e=>V(X).username=e),modelModifiers:{trim:!0},"prefix-icon":V(ue)},null,8,["placeholder","modelValue","prefix-icon"])])),_:1}),Y(c,{prop:"password"},{default:q((()=>[Y(d,{placeholder:e.$t("login.placeholder[1]"),modelValue:V(X).password,"onUpdate:modelValue":t[1]||(t[1]=e=>V(X).password=e),modelModifiers:{trim:!0},"prefix-icon":V(de),type:"password",radius:"8px","show-password":"",autocomplete:"off"},null,8,["placeholder","modelValue","prefix-icon"])])),_:1}),re(j("div",je,[j("div",{class:C(["drag-verify-content",{error:!V(T)&&V(B)}])},[Y(p,{ref_key:"dragVerify",ref:o,value:V(T),"onUpdate:value":t[2]||(t[2]=e=>ce(T)?T.value=e:null),width:V(z)<500?328:438,text:e.$t("login.sliderText"),textColor:"var(--art-gray-800)",successText:e.$t("login.sliderSuccessText"),progressBarBg:V(y)("--el-color-primary"),background:"var(--art-gray-200)",handlerBg:"var(--art-main-bg-color)"},null,8,["value","width","text","successText","progressBarBg"])],2),j("p",{class:C(["error-text",{"show-error-text":!V(T)&&V(B)}])},A(e.$t("login.placeholder[2]")),3)],512),[[pe,V(L)]]),j("div",Ce,[Y(g,{modelValue:V(X).rememberPassword,"onUpdate:modelValue":t[3]||(t[3]=e=>V(X).rememberPassword=e)},{default:q((()=>[E(A(e.$t("login.rememberPwd")),1)])),_:1},8,["modelValue"]),Y(v,{to:V(x).ForgetPassword},{default:q((()=>[E(A(e.$t("login.forgetPwd")),1)])),_:1},8,["to"])]),j("div",Ve,[re((S(),he(f,{class:"login-btn",type:"primary",onClick:He,loading:V(F)},{default:q((()=>[E(A(e.$t("login.btnText")),1)])),_:1},8,["loading"])),[[b]])]),j("div",De,[j("p",null,[E(A(e.$t("login.noAccount"))+" ",1),Y(v,{to:V(x).Register},{default:q((()=>[E(A(e.$t("login.register")),1)])),_:1},8,["to"])])])])),_:1},8,["model","rules"])])])])])}}}))));var Ee;const Ae=n(He,[["__scopeId","data-v-80b0394b"]]);export{Ae as default};
