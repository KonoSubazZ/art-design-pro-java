var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,i=(e,t,a)=>new Promise(((s,l)=>{var o=e=>{try{i(a.next(e))}catch(t){l(t)}},r=e=>{try{i(a.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,r);i((a=a.apply(e,t)).next())}));import{_ as n,u as d,a as u,b as c,A as p,c as g,d as h,S as v,e as f,l as m,g as y,R as x,U as w,f as b,H as _}from"./index-esXo6YLl.js";/* empty css                    */import{k,a2 as T,aG as M,r as B,e as P,aH as I,c as L,m as O,t as $,z as j,F as V,u as C,p as S,v as D,T as E,G as H,aw as R,_ as X,aI as A,aJ as U,aK as F,E as z,s as K,x as G,y as Y,av as q,aL as J,M as N,a3 as Q,l as W,C as Z,D as ee,at as te,I as ae,J as se,au as le,O as oe,a4 as re,L as ie,aM as ne,a5 as de,i as ue,aa as ce,aN as pe,S as ge,P as he,j as ve}from"./vendor-C0Cq8Zey.js";import{_ as fe}from"./LoginLeftView-C1FjyCCN.js";import{S as me}from"./sysApi-B6SsvyFl.js";import"./lf_icon2-Byh5fA9S.js";const ye=["innerHTML"],xe=n(k({__name:"ArtDragVerify",props:{value:{type:Boolean,default:!1},width:{default:260},height:{default:38},text:{default:"按住滑块拖动"},successText:{default:"success"},background:{default:"#eee"},progressBarBg:{default:"#1385FF"},completedBg:{default:"#57D187"},circle:{type:Boolean,default:!1},radius:{default:"calc(var(--custom-radius) / 3 + 2px)"},handlerIcon:{default:"&#xea50;"},successIcon:{default:"&#xe621;"},handlerBg:{default:"#fff"},textSize:{default:"13px"},textColor:{default:"#333"}},emits:["handlerMove","update:value","passCallback"],setup(e,{expose:t,emit:a}){const s=a,l=e,o=T({isMoving:!1,x:0,isOk:!1}),{isOk:r}=M(o),i=B(),n=B(),d=B(),u=B();let c,p,g,h;const v=e=>{c=e.targetTouches[0].pageX,p=e.targetTouches[0].pageY},f=e=>{g=e.targetTouches[0].pageX,h=e.targetTouches[0].pageY,Math.abs(g-c)>Math.abs(h-p)&&e.preventDefault()};document.addEventListener("touchstart",v),document.addEventListener("touchmove",f,{passive:!1}),P((()=>{var e,t,a;null==(e=i.value)||e.style.setProperty("--textColor",l.textColor),null==(t=i.value)||t.style.setProperty("--width",Math.floor(l.width/2)+"px"),null==(a=i.value)||a.style.setProperty("--pwidth",-Math.floor(l.width/2)+"px"),document.addEventListener("touchstart",v),document.addEventListener("touchmove",f,{passive:!1})})),I((()=>{document.removeEventListener("touchstart",v),document.removeEventListener("touchmove",f)}));const m={left:"0",width:l.height+"px",height:l.height+"px",background:l.handlerBg},y={width:l.width+"px",height:l.height+"px",lineHeight:l.height+"px",background:l.background,borderRadius:l.circle?l.height/2+"px":l.radius},x={background:l.progressBarBg,height:l.height+"px",borderRadius:l.circle?l.height/2+"px 0 0 "+l.height/2+"px":l.radius},w={height:l.height+"px",width:l.width+"px",fontSize:l.textSize},b=L((()=>l.value?l.successText:l.text)),_=e=>{l.value||(o.isMoving=!0,d.value.style.transition="none",o.x=(e.pageX||e.touches[0].pageX)-parseInt(d.value.style.left.replace("px",""),10)),s("handlerMove")},k=e=>{if(o.isMoving&&!l.value){let t=(e.pageX||e.touches[0].pageX)-o.x;t>0&&t<=l.width-l.height?(d.value.style.left=t+"px",u.value.style.width=t+l.height/2+"px"):t>l.width-l.height&&(d.value.style.left=l.width-l.height+"px",u.value.style.width=l.width-l.height/2+"px",X())}},R=e=>{if(o.isMoving&&!l.value){(e.pageX||e.changedTouches[0].pageX)-o.x<l.width-l.height?(o.isOk=!0,d.value.style.left="0",d.value.style.transition="all 0.2s",u.value.style.width="0",o.isOk=!1):(d.value.style.transition="none",d.value.style.left=l.width-l.height+"px",u.value.style.width=l.width-l.height/2+"px",X()),o.isMoving=!1}},X=()=>{s("update:value",!0),o.isMoving=!1,u.value.style.background=l.completedBg,n.value.style["-webkit-text-fill-color"]="unset",n.value.style.animation="slidetounlock2 3s infinite",n.value.style.color="#fff",s("passCallback")};return t({reset:()=>{d.value.style.left="0",u.value.style.width="0",d.value.children[0].innerHTML=l.handlerIcon,n.value.style["-webkit-text-fill-color"]="transparent",n.value.style.animation="slidetounlock 3s infinite",n.value.style.color=l.background,s("update:value",!1),o.isOk=!1,o.isMoving=!1,o.x=0}}),(e,t)=>($(),O("div",{ref_key:"dragVerify",ref:i,class:"drag_verify",style:y,onMousemove:k,onMouseup:R,onMouseleave:R,onTouchmove:k,onTouchend:R},[j("div",{class:V(["dv_progress_bar",{goFirst2:C(r)}]),ref_key:"progressBar",ref:u,style:x},null,2),j("div",{class:"dv_text",style:w,ref_key:"messageRef",ref:n},[e.$slots.textBefore?S(e.$slots,"textBefore",{key:0},void 0,!0):D("",!0),E(" "+H(C(b))+" ",1),e.$slots.textAfter?S(e.$slots,"textAfter",{key:1},void 0,!0):D("",!0)],512),j("div",{class:V(["dv_handler dv_handler_bg",{goFirst:C(r)}]),onMousedown:_,onTouchstart:_,ref_key:"handler",ref:d,style:m},[j("i",{class:"iconfont-sys",innerHTML:e.value?e.successIcon:e.handlerIcon},null,8,ye)],34)],544))}}),[["__scopeId","data-v-61236fff"]]);class we{static tip(e,t=!0){return i(this,null,(function*(){const{msg:a,detailMsg:s}=e,l=e=>i(this,null,(function*(){try{yield navigator.clipboard.writeText(e),z.success("已复制详情到剪切板")}catch(t){z.error("复制失败")}}));R({title:"操作提示",message:X("div",null,[X(A,{type:"danger"},a),s&&t&&X(U,{expandIconPosition:"left"},[X(F,{title:"详情",style:{maxHeight:"600px",overflowY:"auto"}},(()=>X(A,{type:"danger"},s)))])].filter(Boolean)),confirmButtonText:"确认",cancelButtonText:"复制",showCancelButton:t&&Boolean(s),showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1,draggable:!0}).then((()=>{})).catch((e=>{"cancel"===e&&s&&l(s)}))}))}}const be={class:"login"},_e={class:"right-wrap"},ke={class:"top-right-wrap"},Te={class:"iconfont-sys"},Me={class:"menu-txt"},Be={key:0,class:"iconfont-sys icon-check"},Pe={class:"header"},Ie={class:"login-wrap"},Le={class:"form"},Oe={class:"title"},$e={class:"sub-title"},je={class:"drag-verify"},Ve={class:"forget-password"},Ce={style:{"margin-top":"30px"}},Se={class:"footer"},De=k((Ee=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&r(e,a,t[a]);if(s)for(var a of s(t))o.call(t,a)&&r(e,a,t[a]);return e})({},{name:"Login"}),t(Ee,a({__name:"index",setup(e){const{t:t}=d(),a=u(),{isDark:s,systemThemeType:l}=K(a),o=B(),r=c(),n=W(),k=B(!1),M=B(!1),I=B(!1),S=p.systemInfo.name,R=B(),X=T({username:"",password:"",rememberPassword:!0}),A=L((()=>({username:[{required:!0,message:t("login.placeholder[0]"),trigger:"blur"}],password:[{required:!0,message:t("login.placeholder[1]"),trigger:"blur"}]}))),U=B(!1),{width:F}=g();P((()=>i(this,null,(function*(){const{data:e,success:t}=yield me.getDataByKey({dataKey:"iboot-studio.slide-validator.enabled"});t&&(I.value="true"===e)}))));const ye=()=>i(this,null,(function*(){R.value&&(yield R.value.validate((e=>i(this,null,(function*(){if(e){if(I.value&&!k.value)return void(M.value=!0);U.value=!0;const e={userName:X.username,password:X.password,rememberPassword:X.rememberPassword};try{const t=yield w.login(e);if(t.code===b.success){const{saTokenInfo:e}=t.data;if(null==e?void 0:e.tokenValue){r.setSaTokenInfo(e);const t=yield w.getUserInfo();r.setLoginStatus(!0),t.code===b.success?(r.setUserInfo(t.data),r.setLoginStatus(!0),yield n.push(_),Ee()):z.error(t.msg)}}else yield we.tip(t,!0),U.value=!1,De()}finally{U.value=!1,De()}}})))))})),De=()=>{var e;null==(e=o.value)||e.reset()},Ee=()=>{setTimeout((()=>{ve({title:t("login.success.title"),type:"success",duration:2500,zIndex:1e4,message:`${t("login.success.message")}, ${S}!`})}),150)},{locale:He}=d(),Re=e=>{He.value!==e&&(He.value=e,r.setLanguage(e))},Xe=()=>{let{LIGHT:e,DARK:t}=v;f().switchThemeStyles(l.value===e?t:e)};return(e,t)=>{const a=fe,l=le,r=te,i=q,n=h,d=J,u=ie,c=re,p=xe,g=pe,v=Z("RouterLink"),f=he,w=Q,b=ee("ripple");return $(),O("div",be,[G(a),j("div",_e,[j("div",ke,[j("div",{class:"btn theme-btn",onClick:Xe},[j("i",Te,H(C(s)?"":""),1)]),G(i,{onCommand:Re,"popper-class":"langDropDownStyle"},{dropdown:Y((()=>[G(r,null,{default:Y((()=>[($(!0),O(ae,null,se(C(m),(e=>($(),O("div",{key:e.value,class:"lang-btn-item"},[G(l,{command:e.value,class:V({"is-selected":C(He)===e.value})},{default:Y((()=>[j("span",Me,H(e.label),1),C(He)===e.value?($(),O("i",Be,"")):D("",!0)])),_:2},1032,["command","class"])])))),128))])),_:1})])),default:Y((()=>[t[4]||(t[4]=j("div",{class:"btn language-btn"},[j("i",{class:"iconfont-sys icon-language"},"")],-1))])),_:1,__:[4]})]),j("div",Pe,[G(n,{class:"icon"}),j("h1",null,H(C(S)),1)]),j("div",Ie,[j("div",Le,[j("h3",Oe,H(e.$t("login.title")),1),j("p",$e,[t[6]||(t[6]=E("关注微信公号 ")),G(d,{target:"_blank",type:"primary",underline:"always",href:"./iboot/iboot_wx_pub.jpg"},{default:Y((()=>t[5]||(t[5]=[E("iboot ")]))),_:1,__:[5]}),t[7]||(t[7]=E(" 回复 “iboot” 获取账户密码登录体验。 "))]),G(w,{ref_key:"formRef",ref:R,model:C(X),rules:C(A),onKeyup:N(ye,["enter"]),style:{"margin-top":"25px"}},{default:Y((()=>[G(c,{prop:"username"},{default:Y((()=>[G(u,{placeholder:e.$t("login.placeholder[0]"),modelValue:C(X).username,"onUpdate:modelValue":t[0]||(t[0]=e=>C(X).username=e),modelModifiers:{trim:!0},"prefix-icon":C(ne)},null,8,["placeholder","modelValue","prefix-icon"])])),_:1}),G(c,{prop:"password"},{default:Y((()=>[G(u,{placeholder:e.$t("login.placeholder[1]"),modelValue:C(X).password,"onUpdate:modelValue":t[1]||(t[1]=e=>C(X).password=e),modelModifiers:{trim:!0},"prefix-icon":C(de),type:"password",radius:"8px","show-password":"",autocomplete:"off"},null,8,["placeholder","modelValue","prefix-icon"])])),_:1}),oe(j("div",je,[j("div",{class:V(["drag-verify-content",{error:!C(k)&&C(M)}])},[G(p,{ref_key:"dragVerify",ref:o,value:C(k),"onUpdate:value":t[2]||(t[2]=e=>ue(k)?k.value=e:null),width:C(F)<500?328:438,text:e.$t("login.sliderText"),textColor:"var(--art-gray-800)",successText:e.$t("login.sliderSuccessText"),progressBarBg:C(y)("--el-color-primary"),background:"var(--art-gray-200)",handlerBg:"var(--art-main-bg-color)"},null,8,["value","width","text","successText","progressBarBg"])],2),j("p",{class:V(["error-text",{"show-error-text":!C(k)&&C(M)}])},H(e.$t("login.placeholder[2]")),3)],512),[[ce,C(I)]]),j("div",Ve,[G(g,{modelValue:C(X).rememberPassword,"onUpdate:modelValue":t[3]||(t[3]=e=>C(X).rememberPassword=e)},{default:Y((()=>[E(H(e.$t("login.rememberPwd")),1)])),_:1},8,["modelValue"]),G(v,{to:C(x).ForgetPassword},{default:Y((()=>[E(H(e.$t("login.forgetPwd")),1)])),_:1},8,["to"])]),j("div",Ce,[oe(($(),ge(f,{class:"login-btn",type:"primary",onClick:ye,loading:C(U)},{default:Y((()=>[E(H(e.$t("login.btnText")),1)])),_:1},8,["loading"])),[[b]])]),j("div",Se,[j("p",null,[E(H(e.$t("login.noAccount"))+" ",1),G(v,{to:C(x).Register},{default:Y((()=>[E(H(e.$t("login.register")),1)])),_:1},8,["to"])])])])),_:1},8,["model","rules"])])])])])}}}))));var Ee;const He=n(De,[["__scopeId","data-v-2b869e85"]]);export{He as default};
