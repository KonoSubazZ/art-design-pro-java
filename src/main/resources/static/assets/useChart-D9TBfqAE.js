import{i as e}from"./index-Bqf32_B1.js";import{s as t,r as n,w as i,o,a as l,b as r,n as s}from"./vendor-CbDhNKi9.js";import{g as a,u}from"./index-ud5QEMuE.js";const c=()=>({chartHeight:"16rem",fontSize:13,fontColor:"#999",themeColor:a("--el-color-primary-light-1")});function h(a={}){const{initOptions:h,initDelay:m=0,threshold:d=.1,autoTheme:f=!0}=a,p=u(),{isDark:w,menuOpen:y,menuType:g}=t(p),v=n();let E=null,C=null,S=null,T=null,D=null,z=!1;const A=()=>{D&&cancelAnimationFrame(D),D=requestAnimationFrame((()=>{L(),D=null}))},O=()=>{T&&clearTimeout(T),T=window.setTimeout((()=>{A(),T=null}),100)};i(y,(()=>{s((()=>{A()}));[50,100,200,350].forEach((e=>{setTimeout((()=>{A()}),e)}))})),i(g,(()=>{s((()=>{A()})),setTimeout((()=>{[50,100,200].forEach((e=>{setTimeout((()=>{A()}),e)}))}),0)})),f&&i(w,(()=>{E&&!z&&requestAnimationFrame((()=>{if(E&&!z){const e=E.getOption();e&&F(e)}}))}));const x=()=>{C&&(C.disconnect(),C=null)},b=(t={})=>{if(!v.value||z)return;const n={...h,...t};try{if((e=>{const t=e.getBoundingClientRect();return t.width>0&&t.height>0&&t.top<window.innerHeight&&t.bottom>0})(v.value)){const t=()=>{E||!v.value||z||(E=e(v.value)),E&&!z&&(E.setOption(n),S=null)};m>0?setTimeout(t,m):t()}else S=n,!C&&v.value&&(C=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&S&&!z&&requestAnimationFrame((()=>{if(!z&&S)try{E||(E=e(t.target)),E.setOption(S),S=null,x()}catch(n){}}))}))}),{threshold:d}),C.observe(v.value))}catch(i){}},F=e=>{if(!z)try{if(!E)return void b(e);E.setOption(e)}catch(t){}},L=()=>{if(E&&!z)try{E.resize()}catch(e){}},I=()=>{if(z=!0,E)try{E.dispose()}catch(e){}finally{E=null}x(),T&&(clearTimeout(T),T=null),D&&(cancelAnimationFrame(D),D=null),S=null};return o((()=>{window.addEventListener("resize",O)})),l((()=>{window.removeEventListener("resize",O)})),r((()=>{I()})),{isDark:w,chartRef:v,initChart:b,updateChart:F,handleResize:L,destroyChart:I,getChartInstance:()=>E,isChartInitialized:()=>null!==E,getAxisLineStyle:(e=!0)=>({show:e,lineStyle:{color:w.value?"#444":"#EDEDED",width:1}}),getSplitLineStyle:(e=!0)=>({show:e,lineStyle:{color:w.value?"#444":"#EDEDED",width:1,type:"dashed"}}),getAxisLabelStyle:(e=!0)=>({show:e,color:c().fontColor,fontSize:c().fontSize}),getAxisTickStyle:()=>({show:!1}),useChartOps:c}}export{h as a,c as u};
